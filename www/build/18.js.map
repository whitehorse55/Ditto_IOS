{"version":3,"sources":["../../src/pages/signin/signin.module.ts","../../src/pages/signin/signin.ts"],"names":[],"mappings":"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","file":"18.js","sourcesContent":["import { NgModule } from '@angular/core';\nimport { IonicPageModule } from 'ionic-angular';\nimport { SigninPage } from './signin';\n\n@NgModule({\n  declarations: [\n    SigninPage,\n  ],\n  imports: [\n    IonicPageModule.forChild(SigninPage),\n  ],\n})\nexport class SigninPageModule {}\n\n\n\n// WEBPACK FOOTER //\n// ./src/pages/signin/signin.module.ts","import { FcmProvider } from './../../providers/fcm/fcm';\nimport { Component } from \"@angular/core\";\nimport {\n  IonicPage,\n  NavController,\n  NavParams,\n  Loading,\n  AlertController,\n  LoadingController,\n  ToastController,\n  ModalController\n} from \"ionic-angular\";\nimport { ValidationProvider } from \"../../providers/validation/validation\";\nimport { AuthProvider } from \"./../../providers/auth/auth\";\n/**\n * Generated class for the SigninPage page.\n *\n * See https://ionicframework.com/docs/components/#navigation for more info on\n * Ionic pages and navigation.\n */\n\n@IonicPage()\n@Component({\n  selector: \"page-signin\",\n  templateUrl: \"signin.html\"\n})\nexport class SigninPage {\n  registerCredentials = { email: \"\", password: \"\" };\n\n  loading: Loading;\n\n  constructor(\n    public navCtrl: NavController,\n    public navParams: NavParams,\n    public validationprovider: ValidationProvider,\n    public alertCtrl: AlertController,\n    public loadingCtrl: LoadingController,\n    public toastCtrl: ToastController,\n    public authprovider: AuthProvider,\n    public modalCtrl: ModalController,\n    public fcmprovider : FcmProvider\n  ) {}\n\n  ionViewDidLoad() {\n    console.log(\"ionViewDidLoad SigninPage\");\n  }\n\n  public login() {\n    this.showLoading();\n\n    this.validationprovider\n      .login(this.registerCredentials)\n      .then(success => {\n        this.authprovider\n          .login(this.registerCredentials)\n          .then(result => {\n            this.authprovider\n              .checkEmailVerify()\n              .then(res => {\n                this.authprovider\n                  .getUserInfoFromEmail(this.registerCredentials.email)\n                  .then(succes => {\n                    console.log(\"visitresult\", succes);\n                    this.authprovider.getUserVisited().then(visitresult=>{\n                      this.loading.dismiss();\n                      console.log(\"visitresult\", visitresult);\n\n                      if(succes['firstlogin'] == false)\n                      {\n                        if(visitresult[0]['isVisited']==null){\n                          this.authprovider.updateUserVisited(true)\n                          this.fcmprovider.getToken()\n                          this.navCtrl.setRoot(\"WalkthroughPage\");\n                        }else{\n                          this.fcmprovider.getToken()\n                          this.navCtrl.setRoot(\"WelcomePage\");\n                        }\n                        \n                      }else{\n                        if(visitresult[0]['isVisited']==null){\n                          this.authprovider.updateUserVisited(true)\n                          this.fcmprovider.getToken()\n                          this.navCtrl.setRoot(\"WalkthroughPage\");\n                        }else{\n                          this.fcmprovider.getToken()\n                          this.navCtrl.setRoot(\"BottomtabbarPage\");\n                        } \n                      }\n\n\n                    }).catch(er=>{\n                      this.showError(er);\n                      this.loading.dismiss();\n                    })\n                \n                   \n                  });\n              })\n              .catch(er => {\n                this.showError(er);\n                this.loading.dismiss();\n              });\n          })\n          .catch(err => {\n            this.showError(err);\n            this.loading.dismiss();\n          });\n      })\n      .catch(error => {\n        this.showError(error);\n        this.loading.dismiss();\n      });\n  }\n\n  onclickCancel() {\n    this.navCtrl.pop();\n  }\n\n  onclickSignup() {\n    console.log(\"click create account button\");\n    let signupModal = this.modalCtrl.create(\"SignupPage\");\n    signupModal.onDidDismiss(phonenumber => {\n      console.log(\"closed modal vieww\");\n    });\n    signupModal.present();\n  }\n  /////////////////// show toast function////////////////////\n  notify(message: string) {\n    let toast = this.toastCtrl.create({\n      message: message,\n      duration: 3000,\n      position: \"bottom\"\n    });\n    toast.present();\n  }\n\n  ////////////// function : show progress view///////////////////\n  showLoading() {\n    this.loading = this.loadingCtrl.create({\n      content: \"Please wait...\",\n      dismissOnPageChange: true\n    });\n    this.loading.present();\n  }\n\n  ////////// function : show error alert ///////////////////////\n  showError(text) {\n    this.loading.dismiss();\n    let alert = this.alertCtrl.create({\n      title: \"Fail\",\n      subTitle: text,\n      buttons: [\n        {\n          text: \"Ok\",\n          handler: () => {\n            alert.dismiss();\n            return false; // put this on last line of callback\n          }\n        }\n      ]\n    });\n    // alert.present(prompt);\n    alert.present();\n  }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/pages/signin/signin.ts"],"sourceRoot":""}