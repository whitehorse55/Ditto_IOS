{"version":3,"sources":["../../src/pages/login/login.module.ts","../../src/pages/login/login.ts"],"names":[],"mappings":"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","file":"23.js","sourcesContent":["import { NgModule } from '@angular/core';\nimport { IonicPageModule } from 'ionic-angular';\nimport { LoginPage } from './login';\n\n@NgModule({\n  declarations: [\n    LoginPage,\n  ],\n  imports: [\n    IonicPageModule.forChild(LoginPage),\n  ],\n})\nexport class LoginPageModule {}\n\n\n\n// WEBPACK FOOTER //\n// ./src/pages/login/login.module.ts","import { AuthProvider } from './../../providers/auth/auth';\nimport { Component, ViewChild } from '@angular/core';\nimport {\n  IonicPage,\n  NavController,\n  NavParams,\n  ModalController,\n  AlertController,\n  Loading,\n  ToastController,\n  LoadingController,\n  Slides\n} from 'ionic-angular';\nimport firebase from 'firebase';\nimport { FacebookProvider } from '../../providers/facebook/facebook';\nimport { FcmProvider } from '../../providers/fcm/fcm';\nimport { GoogleProvider } from '../../providers/google/google';\nimport { AdMobPro } from '@ionic-native/admob-pro';\n\n// import { AdMobFree } from '@ionic-native/admob-free';\n/**\n * Generated class for the LoginPage page.\n *\n * See https://ionicframework.com/docs/components/#navigation for more info on\n * Ionic pages and navigation.\n */\n\n@IonicPage()\n@Component({\n  selector: 'page-login',\n  templateUrl: 'login.html'\n})\nexport class LoginPage {\n  \n  @ViewChild('slider') slider :  Slides\n  slideIndex = 0\n\n  loading: Loading;\n  url_terms  = \"http://www.dittochat.com/terms\"\n  url_privacy = \"http://www.dittochat.com/privacy\"\n\n\n  constructor(\n    public navCtrl: NavController,\n    public navParams: NavParams,\n    public modalCtrl: ModalController,\n    public alertCtrl: AlertController,\n    public authprovider: AuthProvider,\n    public toastCtrl: ToastController,\n    public loadingCtrl: LoadingController,\n    public facebookprovider : FacebookProvider,\n    public fcmprovider : FcmProvider,\n    public googleprovider : GoogleProvider,\n    public admobpro : AdMobPro\n    // public admob : AdMobFree\n  ) {}\n\n  ionViewDidLoad() {\n    console.log('ionViewDidLoad LoginPage');\n    this.admobpro.removeBanner()\n  }\n\n  ionViewWillEnter(){\n    let type = this.navParams.get('type')\n    if(type == 'logout')\n    {\n      this.slider.slideTo(0,2)\n    }\n  }\n\n  onSlideChanged()\n  {\n    \n    this.slideIndex = this.slider.getActiveIndex()\n    console.log(\"changed\", this.slideIndex)\n  }\n\n  onclickCreateAccount() {\n    console.log('click create account button');\n    let signupModal = this.modalCtrl.create('SignupPage');\n\n    signupModal.onDidDismiss(phonenumber => {\n      console.log('closed modal vieww');\n    });\n\n    signupModal.present();\n  }\n\n\n  onclickFacebook()\n  {\n      this.showLoading()\n      this.facebookprovider.loginwithFacebook().then(result=>{\n        this.loading.dismiss()\n        this.gotoMainPage(result)\n        \n      }).catch(err=>{\n          this.loading.dismiss()\n          if(err != \"false\")\n          {\n            this.gotoFacebookSignup(err)\n          }\n          \n      })\n  }\n\n  // if facebook user is exist\n  gotoMainPage(info)\n  {\n      console.log(\"this is main page info\", info)\n\n\n      this.authprovider.getUserInfoFromEmail(info['email']).then(succ=>{\n        \n           this.authprovider.getUserVisited().then(visitresult=>{\n                      this.loading.dismiss();\n                      console.log(\"visitresult\", visitresult);\n\n                      if(succ['firstlogin'] == false)\n                      {\n                        if(visitresult[0]['isVisited']==null){\n                          this.authprovider.updateUserVisited(true)\n                          this.fcmprovider.getToken()\n                          this.navCtrl.setRoot('WalkthroughPage');\n                        }else{\n                          this.fcmprovider.getToken()\n                          this.navCtrl.setRoot('WelcomePage');\n                        }\n                        \n                      }else{\n                        if(visitresult[0]['isVisited']==null){\n                          this.authprovider.updateUserVisited(true)\n                          this.fcmprovider.getToken()\n                          this.navCtrl.setRoot('WalkthroughPage');\n                        }else{\n                          this.fcmprovider.getToken()\n                          this.navCtrl.setRoot('BottomtabbarPage');\n                        } \n                      }\n\n\n                    }).catch(er=>{\n                      this.showError(er);\n                      this.loading.dismiss();\n                    })\n      })\n  }\n\n  // when facebook user is not exist\n  gotoFacebookSignup(info)\n  {\n     console.log(\"this is facebook info\", info)\n     this.navCtrl.push('CompletepagePage', {data : info})\n  }\n\n  onclickGoogle()\n  {\n    this.showLoading()\n    this.googleprovider.googleLogin().then(succ=>{\n      this.loading.dismiss()\n      this.gotoMainPage(succ)\n    }).catch(err=>{\n          this.loading.dismiss()\n          if(err != \"false\")\n          {\n            this.gotoFacebookSignup(err)\n          }\n          \n    })\n  }\n\n  onclickterms(item)\n  {\n    console.log('====================================');\n    console.log(item);\n    console.log('====================================');\n    if(item == 'terms')\n    {\n      window.open(this.url_terms,'_system','location=yes');\n    }else{\n      window.open(this.url_privacy, '_system','location=yes');;\n    }\n    \n  }\n\n  presentConfirm(credential) {\n    let alert = this.alertCtrl.create({\n      title: 'Verify Phone',\n      message: 'Please enter the  6 digit code sent to you via SMS',\n      buttons: [\n        {\n          text: 'Cancel',\n          role: 'cancel',\n          handler: () => {\n            console.log('Cancel clicked');\n          }\n        },\n\n        {\n          text: 'Resend',\n          handler: () => {\n            console.log('resend clicked');\n          }\n        },\n\n        {\n          text: 'Cotinue',\n          handler: data => {\n            credential.confirm(data.phone).then(result => {\n              console.log('this is test' + result);\n            });\n          }\n        }\n      ],\n      inputs: [\n        {\n          name: 'phone',\n          placeholder: 'Enter Code',\n          type: 'text'\n        }\n      ]\n    });\n    alert.present();\n  }\n\n  verify(phonenumber) {\n    // this.showLoading()\n    console.log('this is verify function');\n\n    (<any>window).AccountKitPlugin.loginWithPhoneNumber(\n      {\n        useAccessToken: true,\n        defaultCountryCode: 'CN',\n        facebookNotificationsEnabled: true\n      },\n      data => {\n        (<any>window).AccountKitPlugin.getAccount(\n          info => console.log(info),\n          err => console.log(err)\n        );\n      }\n    );\n    // this.authprovider.phoneVerification(phonenumber, this.recaptchaVerifier).then(credential =>{\n    //     this.presentConfirm(credential)\n    //     this.loading.dismiss()\n    // }).catch(error=>{\n    //   console.log(\"enter phon\", error)\n    //     this.showError(error)\n    // })\n  }\n\n  onclickLogin() {\n    this.navCtrl.push('SigninPage');\n  }\n\n  /////////////////// show toast function////////////////////\n  notify(message: string) {\n    let toast = this.toastCtrl.create({\n      message: message,\n      duration: 3000,\n      position: 'bottom'\n    });\n    toast.present();\n  }\n\n  ////////////// function : show progress view///////////////////\n  showLoading() {\n    this.loading = this.loadingCtrl.create({\n      content: 'Please wait...',\n      dismissOnPageChange: true\n    });\n    this.loading.present();\n  }\n\n  ////////// function : show error alert ///////////////////////\n  showError(text) {\n    this.loading.dismiss();\n    let alert = this.alertCtrl.create({\n      title: 'Fail',\n      subTitle: text,\n      buttons: [\n        {\n          text: 'Ok',\n          handler: () => {\n            alert.dismiss();\n            return false; // put this on last line of callback\n          }\n        }\n      ]\n    });\n    // alert.present(prompt);\n    alert.present();\n  }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/pages/login/login.ts"],"sourceRoot":""}