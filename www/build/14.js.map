{"version":3,"sources":["../../src/pages/welcomegeo/welcomegeo.module.ts","../../src/pages/welcomegeo/welcomegeo.ts"],"names":[],"mappings":"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","file":"14.js","sourcesContent":["import { NgModule } from '@angular/core';\nimport { IonicPageModule } from 'ionic-angular';\nimport { WelcomegeoPage } from './welcomegeo';\n\n@NgModule({\n  declarations: [\n    WelcomegeoPage,\n  ],\n  imports: [\n    IonicPageModule.forChild(WelcomegeoPage),\n  ],\n})\nexport class WelcomegeoPageModule {}\n\n\n\n// WEBPACK FOOTER //\n// ./src/pages/welcomegeo/welcomegeo.module.ts","import { LocalstorageProvider } from './../../providers/localstorage/localstorage';\nimport { ValidationProvider } from './../../providers/validation/validation';\nimport { GeolocatinoProvider } from './../../providers/geolocatino/geolocatino';\nimport { Component } from '@angular/core';\nimport {\n  IonicPage,\n  NavController,\n  NavParams,\n  Loading,\n  LoadingController,\n  AlertController\n} from 'ionic-angular';\nimport { FcmProvider } from '../../providers/fcm/fcm';\n\n/**\n * Generated class for the WelcomegeoPage page.\n *\n * See https://ionicframework.com/docs/components/#navigation for more info on\n * Ionic pages and navigation.\n */\n\n@IonicPage()\n@Component({\n  selector: 'page-welcomegeo',\n  templateUrl: 'welcomegeo.html'\n})\nexport class WelcomegeoPage {\n  public place_array: any[];\n  public check_array: any[];\n\n  everycheck: boolean;\n\n  // isMylocation : boolean\n  // code : any\n  loading: Loading;\n\n  geoCredential = { code: '', isMylocation: false };\n  constructor(\n    public navCtrl: NavController,\n    public navParams: NavParams,\n    public loadCtrl: LoadingController,\n    public alertCtrl: AlertController,\n    public validationService: ValidationProvider,\n    public localstorageprovider: LocalstorageProvider,\n    public geolocationprovider: GeolocatinoProvider,\n    public fcmprovider: FcmProvider\n  ) {\n    // this.geolocationprovider\n    //   .changeZipCodeToLocation('beijing')\n    //   .then(su => { })\n    //   .catch(er => {\n    //     alert(er);\n    //   });\n  }\n\n  ionViewDidLoad() {\n    this.check_array = [];\n    this.everycheck = false;\n    this.generatePlaceArray();\n    // this.isMylocation = false\n    // this.code = \"\"\n    this.geoCredential = { code: '', isMylocation: false };\n  }\n\n  private generatePlaceArray() {\n    this.place_array = [\n      {\n        placeurl: 'resturant.png',\n        placename: 'Restaurants',\n        placekey: 'restaurants',\n        ischecked: false\n      },\n      {\n        placeurl: 'cafes.png',\n        placename: 'Arts & Entertainment',\n        placekey: 'arts',\n        ischecked: false\n      },\n      {\n        placeurl: 'bars.png',\n        placename: 'Active Life',\n        placekey: 'active',\n        ischecked: false\n      },\n      {\n        placeurl: 'scale.png',\n        placename: 'Beauty & Spas',\n        placekey: 'beautysvc',\n        ischecked: false\n      },\n      {\n        placeurl: 'scale.png',\n        placename: 'beautysvc',\n        placekey: 'tours',\n        ischecked: false\n      },\n      {\n        placeurl: 'scale.png',\n        placename: 'Bars',\n        placekey: 'bars',\n        ischecked: false\n      },\n    ];\n  }\n\n  // function : get current position\n  ////////////// when click use my location button\n  getcurrentpos() {\n    this.geoCredential.isMylocation = true;\n    this.geoCredential.code = '';\n    // this.isMylocation = true\n    // this.code = \"\"\n  }\n\n  ////////////////when input zip code////////////\n  inputZipcode() {\n    if (this.geoCredential.code != '') {\n      // this.isMylocation = false\n      this.geoCredential.isMylocation = false;\n    }\n  }\n\n  ///////////////function : when change checkbox status//////////////////////\n  onchangeEverythingStatus(checkval) {\n    console.log('checkstua', checkval);\n    if (checkval) {\n      this.checkAll();\n    } else {\n      this.uncheckAll();\n    }\n  }\n\n  onchangeStatus(item, index) {\n    this.checkOneItem(item, index);\n  }\n\n  checkOneItem(item, index) {\n    if (this.everycheck) {\n      this.check_array = [];\n      this.everycheck = false;\n    }\n\n    if (item.ischecked) {\n      this.check_array.push(item.placekey);\n      console.log('check', this.check_array);\n    } else {\n      this.check_array.splice(this.check_array.indexOf(item.placekey), 1);\n      console.log('uncheck', this.check_array);\n    }\n  }\n\n  checkAll() {\n    this.check_array = [];\n    for (let i = 0; i < this.place_array.length; i++) {\n      // this.place_array[i].ischecked = true\n      this.check_array.push(this.place_array[i].placekey);\n    }\n    console.log('clicked checkall', this.check_array);\n  }\n\n  uncheckAll() {\n    this.check_array = [];\n    // for(let i = 0 ; i < this.place_array.length ; i++)\n    // {\n    //     this.place_array[i].ischecked = false\n    // }\n    console.log('clicked uncheckall', this.check_array);\n  }\n\n  /////////////////function : when click let me in button////////////\n  onclickOkbutton() {\n    this.showLoading();\n    console.log('this is credent', this.geoCredential);\n\n    this.validationService\n      .getPlaceList(this.geoCredential, this.check_array)\n      .then(success => {\n        this.saveCategoryListTouserinfo()\n      })\n      .catch(err => {\n        this.loading.dismiss()\n        this.showError(err);\n      });\n  }\n\n\n  saveCategoryListTouserinfo() {\n    ///////////////////// change array to string ///////////////\n    // let usercategoryinfo = this.generateCategoryString()\n\n    //////////////////////// save category string to firestore/////////////////\n    this.fcmprovider.saveUserCategoryInfos(this.check_array).then(res => {\n\n   \n      this.localstorageprovider.saveCategoryList(this.check_array);\n\n      if (this.geoCredential.code != '') {\n        /////////////////// zip code /////////// later\n        this.navCtrl.setRoot('BottomtabbarPage');\n      } else {\n        this.navCtrl.setRoot('BottomtabbarPage');\n      }\n      this.loading.dismiss();\n\n    }).catch(er => {\n      this.loading.dismiss();\n    })\n  }\n\n  ////////////// function : show progress view///////////////////\n  showLoading() {\n    this.loading = this.loadCtrl.create({\n      content: 'Please wait...',\n      dismissOnPageChange: true\n    });\n    this.loading.present();\n  }\n\n  ////////// function : show error alert ///////////////////////\n  showError(text) {\n    this.loading.dismiss();\n    let alert = this.alertCtrl.create({\n      title: 'Fail',\n      subTitle: text,\n      buttons: [\n        {\n          text: 'Ok',\n          handler: () => {\n            alert.dismiss();\n            return false; // put this on last line of callback\n          }\n        }\n      ]\n    });\n    alert.present();\n  }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/pages/welcomegeo/welcomegeo.ts"],"sourceRoot":""}